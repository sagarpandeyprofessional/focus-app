<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' ws: wss:; media-src *; img-src 'self' data:;">
  <title>FOCUS ‚Äî Smart Multi-Screen Sharing</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <!-- APP SHELL                               -->
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="app" class="app">
    <!-- Title Bar (custom, macOS-style) -->
    <header class="titlebar" id="titlebar">
      <div class="titlebar-drag-region"></div>
      <div class="titlebar-brand">
        <span class="brand-icon">‚óâ</span>
        <span class="brand-name">FOCUS</span>
      </div>
      <div class="titlebar-status" id="connection-status">
        <span class="status-dot offline"></span>
        <span class="status-text">Disconnected</span>
      </div>
    </header>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- VIEW: ROLE SELECTION (Landing)      -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main id="view-landing" class="view active">
      <div class="landing">
        <div class="landing-hero">
          <div class="hero-icon">‚óâ</div>
          <h1>FOCUS</h1>
          <p class="hero-subtitle">Smart Multi-Screen Sharing</p>
          <p class="hero-description">
            Share multiple displays with intent-driven focus.
            Viewers automatically follow where you're working.
          </p>
        </div>

        <div class="landing-actions">
          <button id="btn-present" class="btn btn-primary btn-large">
            <span class="btn-icon">üñ•</span>
            Start Presenting
          </button>

          <div class="divider">
            <span>or</span>
          </div>

          <div class="join-group">
            <input
              id="input-session-id"
              type="text"
              class="input"
              placeholder="Enter Session ID"
              spellcheck="false"
              autocomplete="off"
            >
            <button id="btn-join" class="btn btn-secondary">
              Join as Viewer
            </button>
          </div>
        </div>

        <div class="landing-footer">
          <div class="shortcut-hints">
            <span class="hint">
              <kbd>Ctrl+Shift+A</kbd> Toggle Auto-Focus
            </span>
            <span class="hint">
              <kbd>Ctrl+Shift+F</kbd> Freeze Focus
            </span>
            <span class="hint">
              <kbd>Ctrl+Shift+1-3</kbd> Manual Screen Select
            </span>
          </div>
        </div>
      </div>
    </main>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- VIEW: SCREEN SELECTION (Presenter)  -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main id="view-screen-select" class="view">
      <div class="screen-select">
        <h2>Select Displays to Share</h2>
        <p class="subtitle">Choose up to 3 displays. Auto-Focus will track your activity.</p>

        <div id="screen-grid" class="screen-grid">
          <!-- Populated dynamically -->
        </div>

        <div class="screen-select-actions">
          <button id="btn-back-landing" class="btn btn-ghost">
            ‚Üê Back
          </button>
          <button id="btn-start-sharing" class="btn btn-primary" disabled>
            Start Sharing
          </button>
        </div>
      </div>
    </main>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- VIEW: PRESENTER SESSION             -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main id="view-presenter" class="view">
      <div class="presenter-layout">
        <!-- Controls Bar -->
        <div class="presenter-controls">
          <div class="control-group">
            <div class="session-info">
              <span class="label">Session</span>
              <span id="presenter-session-id" class="session-id">‚Äî</span>
              <button id="btn-copy-session" class="btn btn-icon" title="Copy Session ID">
                üìã
              </button>
            </div>
          </div>

          <div class="control-group control-group-center">
            <button id="btn-auto-focus" class="btn btn-toggle active" title="Auto-Focus (Ctrl+Shift+A)">
              <span class="toggle-indicator"></span>
              Auto-Focus
            </button>
            <button id="btn-freeze" class="btn btn-toggle" title="Freeze Focus (Ctrl+Shift+F)">
              <span class="toggle-indicator"></span>
              Freeze
            </button>
          </div>

          <div class="control-group control-group-end">
            <div class="viewer-count">
              <span class="label">Viewers</span>
              <span id="viewer-count" class="count">0</span>
            </div>
            <button id="btn-end-session" class="btn btn-danger btn-small">
              End Session
            </button>
          </div>
        </div>

        <!-- Screen Previews -->
        <div class="presenter-screens">
          <div id="presenter-screen-grid" class="screen-preview-grid">
            <!-- Populated dynamically -->
          </div>
        </div>

        <!-- Focus Debug Panel -->
        <div class="focus-debug" id="focus-debug">
          <div class="debug-header">
            <span>Focus Debug</span>
            <button id="btn-toggle-debug" class="btn btn-icon btn-small">‚ñæ</button>
          </div>
          <div class="debug-body" id="debug-body">
            <div class="debug-row">
              <span class="debug-label">Active Screen</span>
              <span id="debug-active-screen" class="debug-value">‚Äî</span>
            </div>
            <div class="debug-row">
              <span class="debug-label">Reason</span>
              <span id="debug-reason" class="debug-value">‚Äî</span>
            </div>
            <div class="debug-row">
              <span class="debug-label">Confidence</span>
              <span id="debug-confidence" class="debug-value">‚Äî</span>
            </div>
            <div class="debug-row">
              <span class="debug-label">Dwell</span>
              <span id="debug-dwell" class="debug-value">‚Äî</span>
            </div>
            <div class="debug-row">
              <span class="debug-label">Mode</span>
              <span id="debug-mode" class="debug-value">auto</span>
            </div>
            <div class="debug-row">
              <span class="debug-label">Sequence</span>
              <span id="debug-sequence" class="debug-value">0</span>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- VIEW: VIEWER SESSION                -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main id="view-viewer" class="view">
      <div class="viewer-layout">
        <!-- Viewer Controls -->
        <div class="viewer-controls">
          <div class="control-group">
            <div id="viewer-mode-indicator" class="mode-indicator auto-follow">
              <span class="mode-dot"></span>
              <span id="viewer-mode-text">Following Presenter</span>
            </div>
          </div>

          <div class="control-group control-group-center">
            <div id="viewer-focus-tooltip" class="focus-tooltip">
              Presenter is on <strong id="viewer-active-screen-label">Screen 1</strong>
            </div>
          </div>

          <div class="control-group control-group-end">
            <button id="btn-return-follow" class="btn btn-secondary btn-small" style="display:none;">
              ‚Ü© Return to Auto-Follow
            </button>
            <button id="btn-leave-session" class="btn btn-ghost btn-small">
              Leave
            </button>
          </div>
        </div>

        <!-- Main Canvas: Focused Screen -->
        <div class="viewer-main-canvas" id="viewer-main-canvas">
          <video id="viewer-main-video" autoplay playsinline muted></video>
          <div class="focus-border-glow" id="focus-border-glow"></div>
        </div>

        <!-- PiP: Previous Screen (shown briefly on focus change) -->
        <div class="viewer-pip" id="viewer-pip" style="display:none;">
          <video id="viewer-pip-video" autoplay playsinline muted></video>
          <div class="pip-label">Previous</div>
        </div>

        <!-- Screen Map (optional, mini thumbnails) -->
        <div class="viewer-screen-map" id="viewer-screen-map">
          <!-- Populated dynamically -->
        </div>
      </div>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
